"use strict";(self.webpackChunkfigment_documentation=self.webpackChunkfigment_documentation||[]).push([[6277],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),f=r,m=p["".concat(l,".").concat(f)]||p[f]||u[f]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},24524:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const i={title:"Submit Transfer Data",slug:"/guides/staking-api/cosmos/transfer/submit-transfer-data"},o=void 0,s={unversionedId:"guides/staking-api/Cosmos/transfer/submit-transfer-data",id:"guides/staking-api/Cosmos/transfer/submit-transfer-data",title:"Submit Transfer Data",description:"After collecting the required inputs, send a PUT request to /api/v1/flows/[:flow_id]/next to proceed to the next step.",source:"@site/docs/guides/staking-api/Cosmos/transfer/2_submit-transfer-data.mdx",sourceDirName:"guides/staking-api/Cosmos/transfer",slug:"/guides/staking-api/cosmos/transfer/submit-transfer-data",permalink:"/guides/staking-api/cosmos/transfer/submit-transfer-data",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Submit Transfer Data",slug:"/guides/staking-api/cosmos/transfer/submit-transfer-data"},sidebar:"docsSidebar",previous:{title:"Create a New Transfer Flow",permalink:"/guides/staking-api/cosmos/transfer/create-new-flow"},next:{title:"Sign the Transfer Transaction",permalink:"/guides/staking-api/cosmos/transfer/sign-transfer-transaction"}},l={},d=[{value:"Parameters",id:"parameters",level:3},{value:"Sample cURL Request",id:"sample-curl-request",level:4},{value:"Response",id:"response",level:3},{value:"Sample Response",id:"sample-response",level:4}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"After collecting the required inputs, send a ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT")," request to ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/v1/flows/[:flow_id]/next")," to proceed to the next step."),(0,r.kt)("h3",{id:"parameters"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," Name of the action to execute (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"inputs")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"object"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"from_account_address")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," The address from which ATOM will be transferred (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to_account_address")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," The address to which ATOM will be transferred (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"amount")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"number")," The amount of ATOM to be transferred (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"memo")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," A message to record on-chain with your transfer (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas_limit")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"number")," The total amount of gas you're willing to let this transaction consume (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas_price")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"number")," How many ATOM you're willing to pay per unit of gas consumed by this transaction (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pubkey")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," Required only if you're using a fresh account (that does not have any outgoing activity) else optional.")))),(0,r.kt)("h4",{id:"sample-curl-request"},"Sample cURL Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{5-10}","{5-10}":!0},'curl -X PUT \'https://cosmos-slate.datahub.figment.io/api/v1/flows/87c3dd5f-bcbe-7934-92bd-1da47d5aca7e/next\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: <api_key>\' \\\n-d \'{\n  "name": "create_transfer_tx",\n  "inputs": {\n    "from_account_address": "cosmos1u89ikp2v7pr95g0wv2687zleu6v8qjl9qprvzl",\n    "to_account_address": "cosmos1vxhllask0nynh20htyfkpkfthy7k3395kz9c4y",\n    "amount": 1\n  }\n}\'\n')),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("p",null,"Note that in this step, the Staking API will check that your account balance is greater than or equal to the amount you've submitted for transfer.\nExpect an error response if that is not the case."),(0,r.kt)("p",null,"We see two possible ",(0,r.kt)("inlineCode",{parentName:"p"},"actions"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"refresh_transfer_tx")," ","\u2014"," If you need to get a fresh version of the transaction payload (i.e., the nonce has increased)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sign_transfer_tx")," ","\u2014"," Submit a signed transaction payload ready to be broadcast to the network.")),(0,r.kt)("p",null,"We will choose ",(0,r.kt)("inlineCode",{parentName:"p"},"sign_transfer_tx"),", which indicates one input to collect:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transaction_payload")," ","\u2014"," The signed transaction payload ready to be broadcast to the network.")),(0,r.kt)("h4",{id:"sample-response"},"Sample Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"{3}","{3}":!0},'{\n  "id": "87c3dd5f-bcbe-7934-92bd-1da47d5aca7e",\n  "state": "transfer_tx_signature",\n  "actions": [\n    {\n      "name": "refresh_transfer_tx",\n      "inputs": []\n    },\n    {\n      "name": "sign_transfer_tx",\n      "inputs": [\n        {\n          "name": "transaction_payload",\n          "display": "Transaction Payload",\n          "description": "",\n          "type": "signed_transaction",\n          "validations": [\n            {\n              "type": "sign_payload",\n              "options": {}\n            }\n          ],\n          "signers": ["cosmos1u89ikp2v7pr95g0wv2687zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e62616e6b2e763162657461312e4d736753656e64222c2276616c7565223a7b2266726f6d41646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c22746f41646472657373223a22636f736d6f73317678686c6c61736b306e796e683230687479666b706b66746879376b333339356b7a38793363222c22616d6f756e74223a5b7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a2231303030303030227d5d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2231383333222c2264656e6f6d223a227561746f6d227d5d2c22676173223a223733323839227d2c226d656d6f223a22227d"\n        },\n        {\n          "name": "signatures",\n          "display": "Signatures",\n          "description": "",\n          "type": "array_of_signatures",\n          "validations": [],\n          "signers": ["cosmos1u89ikp2v7pr95g0wv2687zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e62616e6b2e763162657461312e4d736753656e64222c2276616c7565223a7b2266726f6d41646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c22746f41646472657373223a22636f736d6f73317678686c6c61736b306e796e683230687479666b706b66746879376b333339356b7a38793363222c22616d6f756e74223a5b7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a2231303030303030227d5d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2231383333222c2264656e6f6d223a227561746f6d227d5d2c22676173223a223733323839227d2c226d656d6f223a22227d",\n          "signing_payload": "2e69cd5b307af260091f58dee7fe63cbc66da049596ec2fb32234caa8e8e3a98"\n        }\n      ]\n    }\n  ],\n  "data": {\n    "from_account_address": "cosmos1u89ikp2v7pr95g0wv2687zleu6v8qjl9qprvzl",\n    "to_account_address": "cosmos1vxhllask0nynh20htyfkpkfthy7k3395kz9c4y",\n    "amount": "1.0",\n    "gas_price": null,\n    "gas_limit": null,\n    "memo": null,\n    "transfer_transaction": {\n      "raw": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e62616e6b2e763162657461312e4d736753656e64222c2276616c7565223a7b2266726f6d41646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c22746f41646472657373223a22636f736d6f73317678686c6c61736b306e796e683230687479666b706b66746879376b333339356b7a38793363222c22616d6f756e74223a5b7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a2231303030303030227d5d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2231383333222c2264656e6f6d223a227561746f6d227d5d2c22676173223a223733323839227d2c226d656d6f223a22227d",\n      "signing_payload": "2e69cd5b307af260091f58dee7fe63cbc66da049596ec2fb32234caa8e8e3a98",\n      "signed": null,\n      "hash": null,\n      "status": null,\n      "error": null,\n      "signatures": null\n    },\n    "account_number": 721346,\n    "sequence": 1,\n    "pubkey": "0a2102db77d72ee215f1a61e5f4ffa098b9325cc1da6f5c3557974ad5f21a2ec9fe625"\n  },\n  "network_code": "cosmos",\n  "chain_code": "testnet",\n  "created_at": "2022-11-16T07:08:33.793Z",\n  "updated_at": "2022-11-16T07:50:08.376Z"\n}\n')),(0,r.kt)("admonition",{title:"note",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to save the ",(0,r.kt)("inlineCode",{parentName:"p"},"transaction_payload")," from this response, which is what needs to be signed in the next step.")))}p.isMDXComponent=!0}}]);