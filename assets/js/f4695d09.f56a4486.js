"use strict";(self.webpackChunkfigment_documentation=self.webpackChunkfigment_documentation||[]).push([[3585],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>m});var t=a(67294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function d(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?d(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},d=Object.keys(e);for(t=0;t<d.length;t++)a=d[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(t=0;t<d.length;t++)a=d[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var o=t.createContext({}),s=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},c=function(e){var n=s(e.components);return t.createElement(o.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},f=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,d=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(a),f=i,m=u["".concat(o,".").concat(f)]||u[f]||p[f]||d;return a?t.createElement(m,r(r({ref:n},c),{},{components:a})):t.createElement(m,r({ref:n},c))}));function m(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var d=a.length,r=new Array(d);r[0]=f;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l[u]="string"==typeof e?e:i,r[1]=l;for(var s=2;s<d;s++)r[s]=a[s];return t.createElement.apply(null,r)}return t.createElement.apply(null,a)}f.displayName="MDXCreateElement"},11220:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>d,metadata:()=>l,toc:()=>s});var t=a(87462),i=(a(67294),a(3905));const d={title:"Submit Undelegation Data",slug:"/guides/staking-api/cosmos/unstaking/submit-undelegation-data"},r=void 0,l={unversionedId:"guides/staking-api/Cosmos/unstaking/submit-undelegation-data",id:"guides/staking-api/Cosmos/unstaking/submit-undelegation-data",title:"Submit Undelegation Data",description:"After collecting the required inputs, send a PUT request to /api/v1/flows/[:flow_id]/next to proceed to the next step.",source:"@site/docs/guides/staking-api/Cosmos/unstaking/2_submit-undelegation-data.mdx",sourceDirName:"guides/staking-api/Cosmos/unstaking",slug:"/guides/staking-api/cosmos/unstaking/submit-undelegation-data",permalink:"/guides/staking-api/cosmos/unstaking/submit-undelegation-data",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Submit Undelegation Data",slug:"/guides/staking-api/cosmos/unstaking/submit-undelegation-data"},sidebar:"docsSidebar",previous:{title:"Create a New Undelegation Flow",permalink:"/guides/staking-api/cosmos/unstaking/create-new-flow"},next:{title:"Sign the Undelegate Transaction",permalink:"/guides/staking-api/cosmos/unstaking/sign-undelegate-transaction"}},o={},s=[{value:"Parameters",id:"parameters",level:3},{value:"Sample cURL Request",id:"sample-curl-request",level:4},{value:"Response",id:"response",level:3},{value:"Sample Response",id:"sample-response",level:4}],c={toc:s};function u(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"After collecting the required inputs, send a ",(0,i.kt)("inlineCode",{parentName:"p"},"PUT")," request to ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/flows/[:flow_id]/next")," to proceed to the next step."),(0,i.kt)("h3",{id:"parameters"},"Parameters"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," Name of the action to execute (required)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"inputs")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"object"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"delegator_address")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," The address from which ATOM was delegated (required)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"validator_address")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," The validator address from which ATOM will be undelegated (required)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"amount")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," The amount of ATOM to be undelegated (required)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"memo")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," A message to record on-chain with your transfer (optional)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gas_limit")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," The total amount of gas you're willing to let this transaction consume (optional)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gas_price")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," How many ATOM you're willing to pay per unit of gas consumed by this transaction (optional)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pubkey")," ","\u2014"," ",(0,i.kt)("inlineCode",{parentName:"li"},"string")," Required only if you're using a fresh account (that does not have any outgoing activity) else optional.")))),(0,i.kt)("h4",{id:"sample-curl-request"},"Sample cURL Request"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{5-10}","{5-10}":!0},'curl -X PUT \'https://cosmos-slate.datahub.figment.io/api/v1/flows/34a3e428-2cad-4205-bd17-ea3ba2fc8c2e/next\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: <api_key>\' \\\n-d \'{\n  "name": "create_undelegate_tx",\n  "inputs": {\n    "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n    "validator_address": "cosmosvaloper1t8dv80kdq3t2g88kn8vtyeldvnf8xq5c4sklmx",\n    "amount": 0.099998,\n    "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125"\n  }\n}\'\n')),(0,i.kt)("h3",{id:"response"},"Response"),(0,i.kt)("p",null,"The response indicates two possible ",(0,i.kt)("inlineCode",{parentName:"p"},"actions"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"refresh_undelegate_tx")," ","\u2014"," If you need to get a fresh version of the transaction payload (i.e., the nonce has increased)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sign_undelegate_tx")," ","\u2014"," Submit a signed transaction payload ready to be broadcast to the network.")),(0,i.kt)("p",null,"We will choose ",(0,i.kt)("inlineCode",{parentName:"p"},"sign_undelegate_tx"),", which indicates one input to collect:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"transaction_payload")," ","\u2014"," The signed transaction payload ready to be broadcast to the network.")),(0,i.kt)("h4",{id:"sample-response"},"Sample Response"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:"{3}","{3}":!0},'{\n  "id": "34a3e428-2cad-4205-bd17-ea3ba2fc8c2e",\n  "state": "undelegate_tx_signature",\n  "actions": [\n    {\n      "name": "refresh_undelegate_tx",\n      "inputs": []\n    },\n    {\n      "name": "sign_undelegate_tx",\n      "inputs": [\n        {\n          "name": "transaction_payload",\n          "display": "Transaction Payload",\n          "description": "",\n          "type": "signed_transaction",\n          "validations": [\n            {\n              "type": "sign_payload",\n              "options": {}\n            }\n          ],\n          "array": false,\n          "default_value": null,\n          "signers": ["cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e7374616b696e672e763162657461312e4d7367556e64656c6567617465222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f706572317438647638306b64713374326738386b6e38767479656c64766e66387871356334736b6c6d78222c22616d6f756e74223a7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a223939393938227d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2235363934222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22323237373436227d2c226d656d6f223a22227d"\n        },\n        {\n          "name": "signatures",\n          "display": "Signatures",\n          "description": "",\n          "type": "array_of_signatures",\n          "validations": [],\n          "array": true,\n          "default_value": null,\n          "element_type": "signature_data",\n          "signers": ["cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e7374616b696e672e763162657461312e4d7367556e64656c6567617465222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f706572317438647638306b64713374326738386b6e38767479656c64766e66387871356334736b6c6d78222c22616d6f756e74223a7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a223939393938227d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2235363934222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22323237373436227d2c226d656d6f223a22227d",\n          "signing_payload": "61558c76f2c70104bf4643e1bd91890a0c7897472178435bd345135297177acd",\n          "inputs": {\n            "input_klass": "Workflows::Signature",\n            "input_instance": {\n              "account_address": null,\n              "signature": null\n            },\n            "flow": {\n              "id": 140563,\n              "customer_id": 7,\n              "chain_id": 10,\n              "workflow_state": "undelegate_tx_signature",\n              "data": {\n                "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n                "validator_address": "cosmosvaloper1t8dv80kdq3t2g88kn8vtyeldvnf8xq5c4sklmx",\n                "amount": "0.099998",\n                "memo": null,\n                "gas_price": null,\n                "gas_limit": null,\n                "undelegate_transaction": {\n                  "raw": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e7374616b696e672e763162657461312e4d7367556e64656c6567617465222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f706572317438647638306b64713374326738386b6e38767479656c64766e66387871356334736b6c6d78222c22616d6f756e74223a7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a223939393938227d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2235363934222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22323237373436227d2c226d656d6f223a22227d",\n                  "signing_payload": "61558c76f2c70104bf4643e1bd91890a0c7897472178435bd345135297177acd",\n                  "signed": null,\n                  "hash": null,\n                  "status": null,\n                  "error": null,\n                  "signatures": null,\n                  "block_number": null\n                },\n                "estimated_unbonded_at": null,\n                "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125"\n              },\n              "created_at": "2022-12-15T10:37:31.604Z",\n              "updated_at": "2022-12-15T10:40:22.559Z",\n              "id_public": "34a3e428-2cad-4205-bd17-ea3ba2fc8c2e",\n              "supported_operation_id": 32\n            },\n            "flow_attributes": {},\n            "empty_input": {\n              "account_address": null,\n              "signature": null\n            }\n          }\n        }\n      ]\n    }\n  ],\n  "data": {\n    "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n    "validator_address": "cosmosvaloper1t8dv80kdq3t2g88kn8vtyeldvnf8xq5c4sklmx",\n    "amount": "0.099998",\n    "memo": null,\n    "gas_price": null,\n    "gas_limit": null,\n    "undelegate_transaction": {\n      "raw": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e7374616b696e672e763162657461312e4d7367556e64656c6567617465222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f706572317438647638306b64713374326738386b6e38767479656c64766e66387871356334736b6c6d78222c22616d6f756e74223a7b2264656e6f6d223a227561746f6d222c22616d6f756e74223a223939393938227d7d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2235363934222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22323237373436227d2c226d656d6f223a22227d",\n      "signing_payload": "61558c76f2c70104bf4643e1bd91890a0c7897472178435bd345135297177acd",\n      "signed": null,\n      "hash": null,\n      "status": null,\n      "error": null,\n      "signatures": null,\n      "block_number": null\n    },\n    "estimated_unbonded_at": null,\n    "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125"\n  },\n  "network_code": "cosmos",\n  "chain_code": "testnet",\n  "created_at": "2022-12-15T10:37:31.604Z",\n  "updated_at": "2022-12-15T10:40:22.559Z"\n}\n')),(0,i.kt)("admonition",{title:"note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Make sure to save the ",(0,i.kt)("inlineCode",{parentName:"p"},"transaction_payload")," from this response, which is what needs to be signed in the next step.")))}u.isMDXComponent=!0}}]);