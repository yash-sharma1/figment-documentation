"use strict";(self.webpackChunkfigment_documentation=self.webpackChunkfigment_documentation||[]).push([[6837],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>f});var t=n(67294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=t.createContext({}),o=function(e){var a=t.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):d(d({},a),e)),n},c=function(e){var a=o(e.components);return t.createElement(l.Provider,{value:a},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=o(n),m=r,f=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return n?t.createElement(f,d(d({ref:a},c),{},{components:n})):t.createElement(f,d({ref:a},c))}));function f(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=n.length,d=new Array(i);d[0]=m;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[p]="string"==typeof e?e:r,d[1]=s;for(var o=2;o<i;o++)d[o]=n[o];return t.createElement.apply(null,d)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},98544:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var t=n(87462),r=(n(67294),n(3905));const i={title:"Submit Claim Rewards Data",slug:"/guides/staking-api/cosmos/claim-rewards/submit-claim-rewards-data"},d=void 0,s={unversionedId:"guides/staking-api/Cosmos/claim-rewards/submit-redelegation-data",id:"guides/staking-api/Cosmos/claim-rewards/submit-redelegation-data",title:"Submit Claim Rewards Data",description:"After collecting the required inputs, send a PUT request to /api/v1/flows/[:flow_id]/next to proceed to the next step.",source:"@site/docs/guides/staking-api/Cosmos/claim-rewards/2_submit-redelegation-data.mdx",sourceDirName:"guides/staking-api/Cosmos/claim-rewards",slug:"/guides/staking-api/cosmos/claim-rewards/submit-claim-rewards-data",permalink:"/guides/staking-api/cosmos/claim-rewards/submit-claim-rewards-data",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Submit Claim Rewards Data",slug:"/guides/staking-api/cosmos/claim-rewards/submit-claim-rewards-data"},sidebar:"docsSidebar",previous:{title:"Create a New Claim Rewards Flow",permalink:"/guides/staking-api/cosmos/claim-rewards/create-new-flow"},next:{title:"Sign the Claim Rewards Transaction",permalink:"/guides/staking-api/cosmos/claim-rewards/sign-claim-rewards-transaction"}},l={},o=[{value:"Parameters",id:"parameters",level:3},{value:"Sample cURL Request",id:"sample-curl-request",level:4},{value:"Response",id:"response",level:3},{value:"Sample Response",id:"sample-response",level:4}],c={toc:o};function p(e){let{components:a,...n}=e;return(0,r.kt)("wrapper",(0,t.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"After collecting the required inputs, send a ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT")," request to ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/v1/flows/[:flow_id]/next")," to proceed to the next step."),(0,r.kt)("h3",{id:"parameters"},"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," Name of the action to execute (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"inputs")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"object"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"delegator_address")," ","\u2014"," The address from which ATOM was delegated (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"validator_addresses")," ","\u2014"," Validator addresses from which staking rewards to be withdrawn (required)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"memo")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," A message to record on-chain with your transfer (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas_limit")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"number")," The total amount of gas you're willing to let this transaction consume (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"gas_price")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"number")," How many ATOM you're willing to pay per unit of gas consumed by this transaction (optional)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"pubkey")," ","\u2014"," ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," Required only if you're using a fresh account (that does not have any outgoing activity) else optional.")))),(0,r.kt)("h4",{id:"sample-curl-request"},"Sample cURL Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{5-13}","{5-13}":!0},'curl -X PUT \'https://cosmos-slate.datahub.figment.io/api/v1/flows/836cc1d2-2f1b-484d-b6ec-903c04e5013d/next\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: <api_key>\' \\\n-d \'{\n  "name": "create_withdraw_tx",\n  "inputs": {\n    "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n    "validator_addresses": [\n      "cosmosvaloper1tflk30mq5vgqjdly92kkhhq3raev2hnz6eete3"\n      ],\n    "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125"\n  }\n}\'\n')),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("p",null,"The response indicates two possible ",(0,r.kt)("inlineCode",{parentName:"p"},"actions"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"refresh_withdraw_tx")," ","\u2014"," If you need to get a fresh version of the transaction payload (i.e., the nonce has increased)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"sign_withdraw_tx")," ","\u2014"," Submit a signed transaction payload ready to be broadcast to the network.")),(0,r.kt)("p",null,"We will choose ",(0,r.kt)("inlineCode",{parentName:"p"},"sign_withdraw_tx"),", which indicates one input to collect:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transaction_payload")," ","\u2014"," The signed transaction payload ready to be broadcast to the network.")),(0,r.kt)("h4",{id:"sample-response"},"Sample Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"{3}","{3}":!0},'{\n  "id": "836cc1d2-2f1b-484d-b6ec-903c04e5013d",\n  "state": "withdraw_tx_signature",\n  "actions": [\n    {\n      "name": "refresh_withdraw_tx",\n      "inputs": []\n    },\n    {\n      "name": "sign_withdraw_tx",\n      "inputs": [\n        {\n          "name": "transaction_payload",\n          "display": "Transaction Payload",\n          "description": "",\n          "type": "signed_transaction",\n          "validations": [\n            {\n              "type": "sign_payload",\n              "options": {}\n            }\n          ],\n          "array": false,\n          "default_value": null,\n          "signers": ["cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e646973747269627574696f6e2e763162657461312e4d7367576974686472617744656c656761746f72526577617264222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a366565746533227d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2233343535222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22313338313631227d2c226d656d6f223a22227d"\n        },\n        {\n          "name": "signatures",\n          "display": "Signatures",\n          "description": "",\n          "type": "array_of_signatures",\n          "validations": [],\n          "array": true,\n          "default_value": null,\n          "element_type": "signature_data",\n          "signers": ["cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl"],\n          "transaction_payload": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e646973747269627574696f6e2e763162657461312e4d7367576974686472617744656c656761746f72526577617264222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a366565746533227d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2233343535222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22313338313631227d2c226d656d6f223a22227d",\n          "signing_payload": "ab4f1ab8c23c94c4d7e56cf41a65eddca54927a146c3b45d680b6909a05e659d",\n          "inputs": {\n            "input_klass": "Workflows::Signature",\n            "input_instance": {\n              "account_address": null,\n              "signature": null\n            },\n            "flow": {\n              "id": 140562,\n              "customer_id": 7,\n              "chain_id": 10,\n              "workflow_state": "withdraw_tx_signature",\n              "data": {\n                "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n                "validator_addresses": [\n                  "cosmosvaloper1tflk30mq5vgqjdly92kkhhq3raev2hnz6eete3"\n                ],\n                "memo": null,\n                "gas_price": null,\n                "gas_limit": null,\n                "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125",\n                "withdraw_transaction": {\n                  "raw": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e646973747269627574696f6e2e763162657461312e4d7367576974686472617744656c656761746f72526577617264222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a366565746533227d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2233343535222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22313338313631227d2c226d656d6f223a22227d",\n                  "signing_payload": "ab4f1ab8c23c94c4d7e56cf41a65eddca54927a146c3b45d680b6909a05e659d",\n                  "signed": null,\n                  "hash": null,\n                  "status": null,\n                  "error": null,\n                  "signatures": null\n                }\n              },\n              "created_at": "2022-12-15T10:28:37.690Z",\n              "updated_at": "2022-12-15T10:32:13.670Z",\n              "id_public": "836cc1d2-2f1b-484d-b6ec-903c04e5013d",\n              "supported_operation_id": 34\n            },\n            "flow_attributes": {},\n            "empty_input": {\n              "account_address": null,\n              "signature": null\n            }\n          }\n        }\n      ]\n    }\n  ],\n  "data": {\n    "delegator_address": "cosmos1u85upk2v7pr65g0wv2976zleu6v8qjl9qprvzl",\n    "validator_addresses": [\n      "cosmosvaloper1tflk30mq5vgqjdly92kkhhq3raev2hnz6eete3"\n    ],\n    "memo": null,\n    "gas_price": null,\n    "gas_limit": null,\n    "pubkey": "0a2102db66d27dd215f1a61e5f4gga098b5293cc1da6f5c3557974ad5f39a2ec0fe125",\n    "withdraw_transaction": {\n      "raw": "7b226d65737361676573223a5b7b227479706555726c223a222f636f736d6f732e646973747269627574696f6e2e763162657461312e4d7367576974686472617744656c656761746f72526577617264222c2276616c7565223a7b2264656c656761746f7241646472657373223a22636f736d6f733175383575706b3276377072363567307776323937367a6c6575367638716a6c39717072767a6c222c2276616c696461746f7241646472657373223a22636f736d6f7376616c6f7065723174666c6b33306d71357667716a646c7939326b6b686871337261657632686e7a366565746533227d7d5d2c22666565223a7b22616d6f756e74223a5b7b22616d6f756e74223a2233343535222c2264656e6f6d223a227561746f6d227d5d2c22676173223a22313338313631227d2c226d656d6f223a22227d",\n      "signing_payload": "ab4f1ab8c23c94c4d7e56cf41a65eddca54927a146c3b45d680b6909a05e659d",\n      "signed": null,\n      "hash": null,\n      "status": null,\n      "error": null,\n      "signatures": null\n    }\n  },\n  "network_code": "cosmos",\n  "chain_code": "testnet",\n  "created_at": "2022-12-15T10:28:37.690Z",\n  "updated_at": "2022-12-15T10:32:13.670Z"\n}\n')),(0,r.kt)("admonition",{title:"note",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to save the ",(0,r.kt)("inlineCode",{parentName:"p"},"transaction_payload")," from this response, which is what needs to be signed in the next step.")))}p.isMDXComponent=!0}}]);